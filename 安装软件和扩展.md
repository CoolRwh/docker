## 更新 ubunt 镜像源



```

## 阿里云
# RUN  sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list
# RUN  sed -i s@/deb.debian.org/@/mirrors.aliyun.com/@g /etc/apt/sources.list 
RUN sed -i s@/deb.debian.org/@/mirrors.aliyun.com/@g /etc/apt/sources.list

RUN  apt-get clean && apt-get update

RUN apt-get install -y procps build-essential zlib1g-dev unzip bzip2 libbz2-dev libxml2 libxml2-dev libldap2-dev apt-utils libjpeg-dev libfreetype6-dev libpng-dev gcc libzip-dev 
 
### 常用扩展安装  
RUN docker-php-ext-install pcntl pdo pdo_mysql gd zip 

```




## 常用扩展安装 ， 扩展下载地址

https://pecl.php.net/package-stats.php

### 可根据 指定版本 下载 扩展


```
 pecl install https://pecl.php.net/get/swoole-4.8.12.tgz

```



> 安装  swoole

```
### 安装扩展 woole 
RUN pecl install swoole \
    && docker-php-ext-enable  swoole
### 开启 swoole.use_shortname = 'Off' 
RUN echo "swoole.use_shortname = 'Off'" >> /usr/local/etc/php/conf.d/docker-php-ext-swoole.ini

```


> 安装  redis

```
### 安装扩展 redis
RUN pecl install redis \ && docker-php-ext-enable redis 

```



> 安装  cphalcon

```
### 安装 cphalcon
ADD ./ext/cphalcon-4.0.6.zip cphalcon-4.0.6.zip
RUN unzip cphalcon-4.0.6.zip
RUN cd cphalcon-4.0.6/build && ./install
RUN echo 'extension=phalcon.so' > /usr/local/etc/php/conf.d/10_phalcon.ini
RUN rm -rf cphalcon-4.0.6.zip

```

> 安装  psr

```
### 安装 psr
RUN pecl install psr
RUN echo 'extension=psr.so' > /usr/local/etc/php/conf.d/11_psr.ini
```


## 常用软件安装


> 安装  composer

```
ENV COMPOSER_HOME /root/composer
RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer
ENV PATH $COMPOSER_HOME/vendor/bin:$PATH

### 更改composer 镜像
RUN composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/

```

>  安装 supervisor

```
RUN apt-get install -y supervisor

```